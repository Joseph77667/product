<div class="px-36 space-y-4">
  <div class="flex justify-between items-center gap-4">
    <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700" (click)="createOrder()">
      Create New Order
    </button>
    <button class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700" (click)="exportOrders()">
      Export All Orders As Excel File
    </button>
  </div>

  <input type="text" placeholder="Search..." (input)="onSearchChange($event)"
    class="border border-gray-300 px-4 py-2 rounded w-full" />

  <div class="overflow-x-auto">
    <table class="min-w-full bg-white shadow-lg rounded mt-2 border">
      <thead class="bg-gray-200">
        <tr>
          <th class="text-left px-4 py-2">ID</th>
          <th class="text-left px-4 py-2">Customer Name</th>
          <th class="text-left px-4 py-2">Phone Number</th>
          <th class="text-left px-4 py-2">Address</th>
          <th class="text-left px-4 py-2">Order Items</th>
          <th class="text-left px-4 py-2">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let order of orders" class="border-t">
          <td class="px-4 py-2">{{ order.id }}</td>
          <td>
            <a [routerLink]="['/order', order.id]" class="text-blue-700 hover:underline">
              {{ order.customerName }}
            </a>
          <td class="px-4 py-2">{{ order.customerPhone }}</td>
          <td class="px-4 py-2 max-w-[150px] truncate">{{ order.address }}</td>
          <td class="px-4 py-2">
            <ul>
              <li *ngFor="let item of order.orderItems">
                {{ item.productName }} ({{ item.quantity }} x ${{ item.productPrice }})
              </li>
            </ul>
          </td>
          <td class="px-4 py-2 space-x-2">
            <button class="bg-blue-500 px-2 py-1 rou text-white hover:underline" (click)="editOrder(order.id)">Edit</button>
            <button class="bg-red-500 px-2 py-1 rou text-white hover:underline" (click)="showDeleteOrder(order.id)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <div *ngIf="showConfirmDialog" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
    <div class="bg-white p-6 rounded-lg shadow-lg max-w-sm w-full">
      <h2 class="text-lg font-semibold mb-4">Confirm For Delete</h2>
      <p class="mb-6">Are you sure you want to delete this order?</p>
      <div class="flex justify-end gap-4">
        <button (click)="confirmDelete()" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700">
          Delete
        </button>
        <button (click)="cancelDelete()" class="bg-gray-300 px-4 py-2 rounded hover:bg-gray-400">
          Cancel
        </button>
      </div>
    </div>
  </div>


  <div class="flex items-center justify-center mt-4 space-x-2 text-sm bg-white p-4 rounded shadow max-w-lg mx-auto">
    <button class="px-3 py-1 bg-gray-200 rounded disabled:opacity-50"
      (click)="onPageChange(0)" [disabled]="page === 0">First</button>
  
    <button class="px-3 py-1 bg-gray-200 rounded disabled:opacity-50"
      (click)="onPageChange(page - 1)" [disabled]="page === 0">Previous</button>
  
    <ng-container *ngFor="let p of paginationRange">
      <button class="px-3 py-1 rounded"
        [ngClass]="{ 'bg-blue-500 text-white': p === page, 'bg-gray-100': p !== page }"
        (click)="onPageChange(p)">
        {{ p + 1 }}
      </button>
    </ng-container>
  
    <button class="px-3 py-1 bg-gray-200 rounded disabled:opacity-50"
      (click)="onPageChange(page + 1)" [disabled]="page + 1 >= totalPages">Next</button>
  
    <button class="px-3 py-1 bg-gray-200 rounded disabled:opacity-50"
      (click)="onPageChange(totalPages - 1)" [disabled]="page + 1 >= totalPages">Last</button>
  </div>
  
</div>