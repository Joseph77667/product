<div>
  <app-import-order></app-import-order>
</div>
<form [formGroup]="form" (ngSubmit)="onSubmit()"
  class="space-y-4 px-6 py-2 max-w-2xl mx-auto bg-white shadow-md rounded-md">
  <h2 class="text-center text-2xl text-blue-700">Create New Order</h2>
  <div class="flex flex-col">
    <label for="customerName" class="text-sm font-medium text-gray-700 mb-2">Customer Name</label>
    <input id="customerName" formControlName="customerName"
      class="px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />
    <div *ngIf="form.get('customerName')?.invalid && form.get('customerName')?.touched"
      class="text-sm text-red-600 mt-2">
      Customer name is required.
    </div>
  </div>

  <div class="flex flex-col">
    <label for="customerPhoneNumber" class="text-sm font-medium text-gray-700 mb-2">Customer Phone Number</label>
    <input id="customerPhoneNumber" formControlName="customerPhoneNumber"
      class="px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />
    <div *ngIf="form.get('customerPhoneNumber')?.invalid && form.get('customerPhoneNumber')?.touched"
      class="text-sm text-red-600 mt-2">
      Please enter a valid 11-digit phone number.
    </div>
  </div>

  <div class="flex flex-col">
    <label for="address" class="text-sm font-medium text-gray-700 mb-2">Address</label>
    <input id="address" formControlName="address"
      class="px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />
    <div *ngIf="form.get('address')?.invalid && form.get('address')?.touched" class="text-sm text-red-600 mt-2">
      Address is required.
    </div>
  </div>

  <div formArrayName="orderItems" class="space-y-4">
    <div *ngFor="let item of orderItems.controls; let i = index" [formGroupName]="i"
      class="grid grid-cols-3 gap-4 items-end border-b pb-4">

      <div class="flex flex-col">
        <label for="productId" class="text-sm font-medium text-gray-700 mb-2">Product ID</label>
        <input id="productId" formControlName="productId"
          class="px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />
        <div *ngIf="item.get('productId')?.invalid && item.get('productId')?.touched" class="text-sm text-red-600 mt-2">
          Product ID is required.
        </div>
      </div>

      <div class="flex flex-col">
        <label for="quantity" class="text-sm font-medium text-gray-700 mb-2">Quantity</label>
        <input id="quantity" formControlName="quantity"
          class="px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" />
        <div *ngIf="item.get('quantity')?.invalid && item.get('quantity')?.touched" class="text-sm text-red-600 mt-2">
          Quantity must be at least 1.
        </div>
      </div>

      <div class="flex items-end">
        <button type="button" (click)="removeOrderItem(i)"
          class="bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 w-full">
          Remove Item
        </button>
      </div>

    </div>
  </div>

  <!-- Add Order Item -->
  <button type="button" (click)="addOrderItem()" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">
    Add Item
  </button>

  <!-- Submit Button -->
  <button type="submit" [disabled]="form.invalid"
    class="bg-green-600 text-white px-4 py-2 w-full rounded-md hover:bg-green-700 disabled:opacity-50">
    Submit Order
  </button>

</form>